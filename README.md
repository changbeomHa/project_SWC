# project_SWC
소프트웨어융합캡스톤디자인


### 개요
#### 발상
이제 우리는 SNS채팅을 통해 대화를 많은 대화를 나누곤 한다.  
얼굴을 마주보지 않아도, 목소리로 직접 전하지 않아도 어렵지 않게 말을 주고받을 수 있다. 다만 이 방법에는 매체의 특성상 감정을 표현하는 것이 힘들다는 단점이 있다.  
이에 사람들은 이모티콘이나 스티커 등을 통해 감정을 표현하곤 하지만 사용자의 실질적인 감정을 제대로 전달하기에는 송신자와 수신자 모두의 입장에서 한정적이라 생각했고, 이를 이번 캡스톤디자인을 통해 해결해보고자 한다.  
<br/>
#### 접근
우리는 영화를 볼 때 많은 감정을 느낄 수 있다. 배우의 대사, 표정 등에서 배우의 감정에 쉽게 이입할 수 있다.
![image](https://github.com/changbeomHa/project_SWC/assets/30552933/0b4612cf-6a34-423c-9618-218c4abd9360)
이 점에 착안하여 영화 장면을 이용한다면, 그 영화에 나를 대입한다면 감정 전달이 효과적일 것이라 생각하였고, 영화라는 데이터를 기반으로 프로젝트를 시작하게 되었다.  
<br/>
### 주제
메신저 채팅에서 화자의 감정을 효과적으로 전달하기 위한 방법 탐색 :  
사용자가 입력한 감정 및 표현과 유사한 영화 장면에 사용자의 얼굴을 합성시켜 출력  
<br/>
### 설계 플로우
구축하고자 하는 프로그램의 플로우는 아래와 같다.
![image](https://github.com/changbeomHa/project_SWC/assets/30552933/17f97e80-600b-48d5-a091-67b4eb0accae)  
<br/>
### 기능 구현
1. 먼저 사용자가 입력한 텍스트와 영화 스크립트의 유사도를 검사한다. 여기서 1차로 사용자가 ‘너는 계획이 다 있구나’ 처럼 특정 영화의 특정 대사를 의도하여 보내고자 하는 경우와 타겟 영화 없이 ‘안녕’, ‘배고파’ 등 일반적인 메시지를 중심으로 관련한 영화를 찾는 경우를 구분하기 위해 1차 필터링 과정을 거친다.
2. 사용자가 입력한 텍스트를 분석하여 감정 및 의도를 파악한다.
3. 분석한 텍스트가 가져올 영화 장면을 매칭한다.
4. 영화에 등장하는 배우의 얼굴에 사용자의 얼굴을 합성한다.  
<br/>

### 텍스트 유사도 분석 플로우
텍스트 유사도 분석은 아래와 같은 과정을 거친다.
![image](https://github.com/changbeomHa/project_SWC/assets/30552933/aba2adf9-ba43-468c-8007-83cd0f817293)
<br/>
### 텍스트 감정 분석
텍스트의 감정 분석은 AI hub에서 제공하는 한국어 데이터로 {0:"공포", 1:"놀람", 2:"분노", 3:"슬픔", 4:"중립", 5:"행복", 6:"혐오"} 총 7개의 감정으로 분류하며, NRC-VAD-Lexicon을 사용하여 텍스트의 valence, arousal, dominance값을 구한다. 이를 종합하여 텍스트의 감정 분류와 수치를 확정한다.  
<br/>
### 총 플로우
위의 과정을 그림으로 나타내면 아래와 같다.
![image](https://github.com/changbeomHa/project_SWC/assets/30552933/0a8dc8a3-2c02-4f9c-ad7f-c4e713b78714)  
<br/>
### 테스트
실험에는 영화 '신세계'를 사용하였다.  
#### 입출력 결과
아래는 입력값에 대한 출력 결과를 나타낸 것이다.
![image](https://github.com/changbeomHa/project_SWC/assets/30552933/b041b74e-ed51-492f-b90e-5dfdb3c0fd6c)
<br/>
#### 얼굴 합성
얼굴 합성에는 논문 SimSwap: An Efficient Framework For High Fidelity Face Swapping 기법을 사용하였다.  
배우 이정재의 얼굴에 일론 머스크의 얼굴이 합성되었다. (높이 240p 기준 초당 변환에 약 4 ~ 5초 소요)
![image](https://github.com/changbeomHa/project_SWC/assets/30552933/97ddec1d-64e8-4819-9653-1bec5108b2ec)
<br/>
### 정리
프로그램의 동작 과정을 정리하면 이렇다.  

Input text  
-> 사용자가 보내고자 하는메시지  
Outupt  
-> 유사한 대본 스크립트, 감정, VAD  
-> 수많은 데이터 셋에서 적절한 결과를 고르는 스코어링 함수 제작  
-> 결과 스크립트가 가진 자막 시간  
-> 영화 장면  





